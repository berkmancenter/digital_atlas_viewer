{% extends 'BerkmanAtlasViewerBundle::layout.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    {% stylesheets 'openlayers/theme/default/style.css'
                   '@BerkmanAtlasViewerBundle/Resources/public/css/ui-darkness/jquery-ui-1.8.16.custom.css'
                   '@BerkmanAtlasViewerBundle/Resources/public/css/atlas_show.css'
                   'openlayers/theme/default/google.css' %}
    <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock stylesheets %}

{% block javascripts %}
    {{ parent() }}
    <script src="../../../openlayers/OpenLayers.js"></script>
    <script src="http://maps.google.com/maps/api/js?v=3.5&amp;sensor=false"></script>
    <script>
        var pages = [
        {% for page in entity.pages %}
            {% if page.bounds is not empty %}
            {
                id: "{{ page.id }}",
                name: "{{ page.name }}",
                metadata: {{ page.metadata|json_encode|raw }},
                bounds: {{ page.bounds|json_encode|raw }},
                minZoom: {{ page.minZoomLevel }},
                maxZoom: {{ page.maxZoomLevel }}
            }, 
            {% endif %}
        {% endfor %}
        ],
        atlasId = {{ entity.id }},
        atlasBounds = {{ entity.bounds|json_encode|raw }},
        minZoom = {{ entity.minZoomLevel }},
        maxZoom = {{ entity.maxZoomLevel }};
    </script>
    {% javascripts 
                   '@BerkmanAtlasViewerBundle/Resources/public/js/atlas_show.js'
                   '@BerkmanAtlasViewerBundle/Resources/public/js/jquery-mousewheel.min.js'
                   '@BerkmanAtlasViewerBundle/Resources/public/js/jquery-ui-1.8.16.custom.min.js' %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock javascripts %}

{% block body %}
<div id="map"></div>
<div id="metadata">
    <dl>
        <dt>Name</dt>
        <dd>{{ entity.name }}</dd>

        <dt>Description</dt>
        <dd>{{ entity.description }}</dd>
    </dl>
    <div id="metadata-close">x</div>
</div>
{% endblock body %}
